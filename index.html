<!DOCTYPE html>
<html lang="zh_Hant">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS期末</title>
    <!--jQuery-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
    <!--Google Font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://demeter.5fpro.com/tw/zipcode-selector.js"></script>

    <link rel="stylesheet" href="MobileStyle.css">
    <link rel="stylesheet" href="style.css">
    <script src="main.js"></script>
    <script src="coollight.js" type="module"></script>
</head>
<body>
    <div class="header">
        <div class="logo">
            <a href="index.html">JS-END</a>
        </div>
        <input type="checkbox" id="menu_control" class="menu_control">
        <label for="menu_control" class="menu_btn">
            <div class="menu_btn_burger"></div>
        </label>
        <div class="crazy">
            <input type="checkbox" class="crazybox">
            <p>RGB</p>
        </div>
        <div class="crazyplay">
            <div class="crazyplay-icon"><p>▶</p></div>
            <div class="crazyplay-content"><p>播放</p></div>
        </div>
        <div class="speed">
            <div id="slider"></div>
            <p>速度speed</p>
        </div>
        <div class="menu" >
            <nav>
                <a href="index.html">首頁</a>
                <a href="#" class="timeopen">目前時間</a>
                <a href="#cont2">縣市溫濕度</a>
                <a href="#" target="_blank">OMG</a>
            <nav>
        </div>
    </div>
    <!-- <p>Space</p>
    <div class="OK">123</div> -->

    <div class="content1-button">
        <a href="#">
        <span></span>
        <span></span>
        <span></span>
        touch me
        </a>
    </div>
    <div class="content1">
        <div id="app">  
        </div>
    </div>
    <a name="cont2"></a>
    <div class="content2">
        <div class="TaiwanTemp">
            <div class="TaiwanIMG">
                <img src="Taiwan.jpg" height="700px" width="auto">
                <div class="Keelung">基隆市</div>
                <div class="NewTaipei">新北市</div>
                <div class="Taipei">臺北市</div>
                <div class="Taoyuan">桃園市</div>
                <div class="HsinchuC">新竹縣</div>
                <div class="HsinchuS">新竹市</div>
                <div class="Miaoli">苗栗縣</div>
                <div class="Taichung">臺中市</div>
                <div class="Changhua">彰化縣</div>
                <div class="Nantou">南投縣</div>
                <div class="Yunlin">雲林縣</div>
                <div class="ChiayiC">嘉義縣</div>
                <div class="ChiayiS">嘉義市</div>
                <div class="Tainan">臺南市</div>
                <div class="Kaohsiung">高雄市</div>
                <div class="Pingtung">屏東縣</div>
                <div class="Yilan">宜蘭縣</div>
                <div class="Hualien">花蓮縣</div>
                <div class="Taitung">臺東縣</div>
                <div class="Penghu">澎湖縣</div>
                <div class="Kinmen">金門縣</div>
                <div class="Lienchiang">連江縣</div>
            </div>
            <div class="CSweather">
                <div class="div0"></div>
                <div class="div1"></div>
                <div class="div2"></div>
                <div class="div3"></div>
                <div class="div4"></div>
                <div class="div5"></div>
                <div class="div6"></div>
                <div class="div7"></div>
                <div class="div8"></div>
                <div class="div9"></div>
                <div class="div10"></div>
                <div class="div11"></div>
                <div class="div12"></div>
                <div class="div13"></div>
                <div class="div14"></div>
                <div class="div15"></div>
                <div class="div16"></div>
                <div class="div17"></div>
                <div class="div18"></div>
                <div class="div19"></div>
                <div class="div20"></div>
                <div class="div21"></div>
                <div class="div22"></div>
                <div class="div23"></div>
                <div class="div24"></div>
                <div class="div25"></div>
                <div class="div26"></div>
                <div class="div27"></div>
                <div class="div28"></div>
                <div class="div29"></div>
                <div class="div30"></div>
                <div class="div31"></div>
                <div class="div32"></div>
                <div class="div33"></div>
                <div class="div34"></div>
                <div class="div35"></div>
                <div class="div36"></div>
                <div class="div37"></div>
                <div class="div38"></div>
                <div class="div39"></div>
            </div>
        </div>
        <div class="box">1123456</div>
    </div>
    <input class="js-demeter-tw-zipcode-selector" data-city="#city4" data-dist="#dist4" placeholder="請輸入郵遞區號" value="22048" >
    <select id="city4" placeholder="請選擇縣市"></select>
    <select id="dist4" placeholder="請選擇鄉鎮區"></select>
    <style>
        .content2{
            position: relative;
            height: 200vh;
            background-color: rgb(238, 207, 121);
        }
        .TaiwanIMG div:hover{
            transition: .3s;
        }
        .CSweather{
            position: absolute;
            color:aliceblue;
            top: 18px;
            left: 510px;
            width: 1200px;
            /* height: 1900px; */
            height: 190px;
            font-size: larger;
            margin: auto;
            display: flex;
            flex-wrap: wrap;
        }
        .CSweather div{
            width: 296px;
            height: 185px;
            padding :0px;
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
    <script>
        var lastclick,movein=0;
        $(document).ready(function(){
            $('.TaiwanIMG div').mouseover(function(){
                movein=1;
                if(lastclick!=('.' + this.className)){
                    $(this).css('background-color', 'rgb(255, 251, 0)');
                    $(this).css('transform', 'scale(1.6)');
                }
            })
            $('.TaiwanIMG div').mouseout(function(){
                if(movein!=2 && lastclick!=('.'+this.className)){
                    $(this).css('background-color', 'rgba(255, 255, 255, 0.8)');
                    $(this).css('transform', 'scale(1)');
                }
                movein=0;
            })
            $('.TaiwanIMG div').click(function(){
                movein=2;
                $('.CSweather').css('background-color','#505050');
                $(lastclick).css('transform', 'scale(1)');
                $(lastclick).css('background-color', 'rgba(255, 255, 255, 0.8)');
                $(this).css('background-color','rgb(255, 187, 0)');
                $(this).css('transform', 'scale(1.6)');
                lastclick='.' + this.className;
            });

function loadWeather(citycode){
    let api_key = 'CWB-C96B02A5-E839-4870-B96E-B529AFC22581'
    let forecastURL = `https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/`+citycode+`?Authorization=${api_key}&format=JSON` 
    console.log(forecastURL);
    $(document).ready(function(){
        $('.div').html("載入中");
        $.ajax({
            url: forecastURL,
            type: "get",
            dataType:"json",
            success: function (info) {
                console.log(info);
                var abc="",num;
                for(i=0;i<40;i++){
                    $('.div'+i).html("");
                    $('.div'+i).css('border','none');
                }
                if(info.cwbopendata.dataset.locations.location.length%4>0){
                    num=(info.cwbopendata.dataset.locations.location.length-(info.cwbopendata.dataset.locations.location.length%4))/4+1;
                }else{
                    num=info.cwbopendata.dataset.locations.location.length/4;
                }
                $('.CSweather').css('height',num*190);
                if(info.cwbopendata.dataset.locations.location.length>40)alert("ERROR");
                for(i=0;i<info.cwbopendata.dataset.locations.location.length;i++){
                    console.log(i);
                    var temp=info.cwbopendata.dataset.locations.location[i];
                    $('.div'+i).html("<h3>"+`<font color=yellow>` + temp.locationName + " " + temp.weatherElement[12].time[0].elementValue[0].value + "</font></h3>" +
                                    "最高溫：" + temp.weatherElement[3].time[0].elementValue.value+ "&#176;C" + " 最低溫：" + temp.weatherElement[9].time[0].elementValue.value + "&#176;C" + "<br>"+
                                    "目前溫度："+ (temp.lat) + "<br>" +
                                    "平均濕度："+ temp.weatherElement[2].time[0].elementValue.value+"%"+"<br>"+
                                    `<font color=aqua>` + "降雨機率："+temp.weatherElement[9].time[0].elementValue.value+"%"+"</font><br>"+
                                    `<font color="orange">`+ "紫外線：" +temp.weatherElement[13].time[0].elementValue[0].value+ "級  " +temp.weatherElement[13].time[0].elementValue[1].value + "曬傷指數</font><br>"
                    );
                    $('.div'+i).css('border','solid 2px black');
                }
            },
            error: function (data) {
                console.log("請求失敗");
            }
        });
    });
} 
$(document).ready(function(){
    $('.Keelung').click(function(){ loadWeather("F-D0047-051");});
    $('.NewTaipei').click(function(){ loadWeather("F-D0047-071");});
    $('.Taipei').click(function(){ loadWeather("F-D0047-063");});
    $('.Taoyuan').click(function(){ loadWeather("F-D0047-007");});
    $('.HsinchuC').click(function(){ loadWeather("F-D0047-011");});
    $('.HsinchuS').click(function(){ loadWeather("F-D0047-055");});
    $('.Miaoli').click(function(){ loadWeather("F-D0047-015");});
    $('.Taichung').click(function(){ loadWeather("F-D0047-075");});
    $('.Changhua').click(function(){ loadWeather("F-D0047-019");});
    $('.Nantou').click(function(){ loadWeather("F-D0047-023");});
    $('.Yunlin').click(function(){ loadWeather("F-D0047-027");});
    $('.ChiayiC').click(function(){ loadWeather("F-D0047-031");});
    $('.ChiayiS').click(function(){ loadWeather("F-D0047-059");});
    $('.Tainan').click(function(){ loadWeather("F-D0047-079");});
    $('.Kaohsiung').click(function(){ loadWeather("F-D0047-067");});
    $('.Pingtung').click(function(){ loadWeather("F-D0047-035");});
    $('.Yilan').click(function(){ loadWeather("F-D0047-003");});
    $('.Hualien').click(function(){ loadWeather("F-D0047-043");});
    $('.Taitung').click(function(){ loadWeather("F-D0047-039");});
    $('.Penghu').click(function(){ loadWeather("F-D0047-047");});
    $('.Kinmen').click(function(){ loadWeather("F-D0047-087");});
    $('.Lienchiang').click(function(){ loadWeather("F-D0047-083");});
});

        });
    </script>
    <div class="time" color="white">
        <div class="timetxt"><p>目前時間</p>
            <div class="closebtn"></div>
        </div>
        <div class="nowtime" style="color:aliceblue;">時間位置</div>
        <div class="block_time">
            <h2>年year</h2>
            <div class="block_year"></div>
            <div class="block">
                <div class="block_yearOK"></div>
                <div class="block_year_circle"></div>
            </div>
            <h2>月month</h2>
            <div class="block_month"></div>
            <div class="block">
                <div class="block_monthOK"></div>
                <div class="block_month_circle"></div>
            </div>
            <h2>日day</h2>
            <div class="block_day"></div>
            <div class="block">
                <div class="block_dayOK"></div>
                <div class="block_day_circle"></div>
            </div>
            <h2>時hour</h2>
            <div class="block_hour"></div>
            <div class="block">
                <div class="block_hourOK"></div>
                <div class="block_hour_circle"></div>
            </div>
            <h2>分miunute</h2>
            <div class="block_minute"></div>
            <div class="block">
                <div class="block_minuteOK"></div>
                <div class="block_minute_circle"></div>
            </div>
            <h2>秒second</h2>
            <div class="block_sec"></div>
            <div class="block">
                <div class="block_secOK"></div>
                <div class="block_sec_circle"></div>
            </div>
            <div class="K101">
                <div class="K101des"><h2>天氣狀態</h2></div>
                <div class="K101temp">溫度</div>
                <div class="K101wet"><h2>濕度</h2></div>
            </div>
        </div>
    </div>
    <div class="content3">
        <div class="cont3img"></div>
        <div class="cont3txt"><h1>0</h1></div>
    </div>
    <style>
        .content3{
            height: 100vh;
            background-color: blanchedalmond;
            position: relative;
        }
        .cont3txt{
            position: absolute;
            top:30px;
            left: 50%;
            font-family:Verdana, Geneva, Tahoma, sans-serif;
        }
        .cont3img{
            width: 100%;
            height: 100%;
            background-image: url(OMG1.png);
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
        }

    </style>
    <script>
        var st=0,t=0;
        $(document).ready(function(){
            $('.content3').click(function(){
                clearTimeout(t);
                //$('.cont3img').html(('<img src="OMG2.png" class="popOMG">'));
                $('.cont3img').css('background-image','url(OMG2.png)');
                st+=1;
                $('.cont3txt').html("<h1>"+st+"</h1>");
                t=setTimeout(function(){
                    $('.cont3img').css('background-image','url(OMG1.png)');
                },100);
                console.log(st);
            });
        });
    </script>
</body>
</html> 